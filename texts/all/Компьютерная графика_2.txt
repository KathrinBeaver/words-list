Лекция 2. Цветовые модели

Индексированный цвет и понятие битовой глубины
Пиксел, как и все данные в компьютере, несет в себе определенную информацию (в данном случае о цвете), выражаемую в битах. Понятно, что чем большим количеством бит описывается пиксел, тем больше информации он может в себе нести. Это обозначается понятием "битовая глубина". Битовую глубину изображения часто называют цветовой разрешающей способностью. Она измеряется в битах на пиксел (bit per pixel, bpp). Так если, к примеру, речь идет об иллюстрации, имеющей в каждом пикселе по 8 бит цветовой информации, то ее цветовая разрешающая способность будет 8 bpp. Возведя цифру 2 (компьютер использует двоичную систему счисления) в степень битовой глубины (2 в 8-й степени) получим 256 доступных для 8-битового изображения цветов.

На принципе 8-битного цвета основана широко использовавшаяся в первой половине 90-х и применяемая в Интернете даже сегодня цветовая модель Index Color. Она работает на основе создания палитры цветов. Все оттенки в файле делятся на 256 возможных вариантов, каждому из которых присваивается номер. Далее, на основе получившейся палитры цветов, строится таблица, где каждому номеру ячейки приписывается цветовой оттенок в значениях RGB.

К форматам файлов, использующим только индексированные палитры относятся распространенный в прошлом на РС формат программы Paint — PCX, а так же, не потерявший и в наши дни своей актуальности, GIF. Некоторые форматы как, например, тот же GIF или PNG  позволяют делать палитры на основе произвольного количества цветов (до 256).

До появления 8-битного цвета, из-за малых мощностей персональных компьютеров тех времен, использовались палитры из 16 цветов (4 bpp), 4 цветов (2 bpp) и самая первая компьютерная графика была однобитовая — 2 цвета. Однобитовые изображения, называемые Bitmap или, иногда, Lineart, используются и сегодня там, где не требуются цвето-тоновые переходы. Равный по размеру Bitmap-файл в 24 раза меньше, чем файл RGB, кроме того очень хорошо сжимается.
Цветовая модель (или цветовое пространство) — это не более чем способ описания цвета с помощью количественных характеристик. При таком представлении не только легко сравнивать отдельные цвета и их оттенки между собой, но и использовать их в цифровых технологиях.
В цветовой модели (пространстве) каждому цвету можно поставить в соответствие строго определенную точку. В этом случае цветовая модель — это просто упрощенное геометрическое представление, основанное на системе координатных осей и принятого масштаба.
Однако цвет, как сложное физическое и психофизиологическое явление, не укладывается в единственную и простую модель, поэтому в области цветоведения создано множество моделей, исходя из разных практических требований. В цифровых технологиях используются, как минимум, четыре основных модели: RGB, CMYK, HSB в различных вариантах и Lab.
Для нужд полиграфии разработаны также многочисленные библиотеки плашечных цветов, расширяющих цветовые охваты стандартных полиграфических триадных систем.


Цветовая модель RGB
Множество цветов видны оттого, что излучается свет определенных длин волн. К излучаемым цветам можно отнести, например, белый свет, цвета на экране телевизора, монитора, кино, слайд-проектора и т. д. Цветов огромное количество, но из них выделено только три, которые считаются основными (первичными): это — красный, зеленый и синий.
Перечисленные цвета совпадают с теми цветами, которые упоминались при обсуждении основ физиологии зрения.
При смешении двух основных цветов результат осветляется: из смешения красного и зеленого получается желтый, из смешения зеленого и синего — голубой, синий и красный дают пурпурный. Если смешиваются все три цвета, образуется белый. Поэтому такие цвета называются аддитивными.
Модель, которую мы упоминали при обсуждении анализа и синтеза цвета, носит название модели RGB по первым буквам английских слов Red (Красный), Green (Зеленый) и Blue (Синий).
Поскольку в модели используется три независимых значения, ее можно представить в виде трехмерной системы координат.
Каждая координата отражает вклад одной из составляющих в результирующий цвет в диапазоне от нуля до максимального значения (его численное значение в данный момент не играет роли, обычно это число 255, т. е. на каждой из осей откладывается уровень серого в каждом из цветовых каналов).
В результате получается некий куб, внутри которого и "находятся" все цвета, образуя цветовое пространство модели RGB. Любой цвет, который можно выразить в цифровом виде, входит в пределы этого пространства.
Объем такого куба (количество цифровых цветов) легко рассчитать: поскольку на каждой оси можно отложить 256 значений, то 256 в кубе (или 2 в двадцать четвертой степени) дает число 16 777 216.
Замечание
Это означает, что в цветовой модели RGB можно описать более 16 миллионов цветов, но использование цветовой модели RGB вовсе не гарантирует, что такое количество цветов может быть обеспечено на экране. В определенном смысле это число — скорее предельная (потенциальная) возможность.
Важно отметить особенные точки и линии данной модели.
1)	Начало координат: в этой точке все составляющие равны нулю, излучение отсутствует, что равносильно темноте, т. е. это точка черного цвета.
2)	Дальняя от начала координат вершина куба: в этой точке все составляющие имеют максимальное значение, что обеспечивает белый цвет.
3)	На линии, соединяющей эти точки (по диагонали), располагаются серые оттенки: от черного до белого. Это происходит потому, что значения всех трех составляющих одинаковы и располагаются в диапазоне от нуля до максимального значения. Такой диапазон иначе называют серой шкалой (grayscale). В компьютерных технологиях сейчас чаще всего используются 256 градаций (оттенков) серого. Хотя некоторые сканеры имеют возможность кодировать и 1024 оттенка серого.
4)	Три вершины куба дают чистые исходные цвета, остальные три отражают двойные (бинарные) смешения исходных цветов: из красного и зеленого получается желтый, из зеленого и синего — голубой, а из красного и синего — пурпурный.
Замечание
Следует отметить, что у аддитивной модели синтеза цвета существуют ограничения. В частности, не удается с помощью физически реализуемых источников основных цветов получить голубой цвет (как в теории — путем смешения синей и зеленой составляющих), на экране монитора он создается с некоторыми техническими ухищрениями. Кроме того, любой получаемый цвет находится в сильной зависимости от вида и состояния применяемых источников. Одинаковые числовые параметры цвета на различных экранах будут выглядеть по-разному. И, по сути дела, модель RGB — это цветовое пространство какого-то конкретного устройства, например сканера или монитора.
Эта модель, конечно, совсем не очевидна для художника или дизайнера, но ее необходимо принять и разобраться в ней вследствие того, что она является теоретической основой процессов сканирования и визуализации изображений на экране монитора.
Цветовая модель CMYK
К отражаемым относятся цвета, которые сами не излучают, а используют белый свет, вычитая из него определенные цвета. Такие цвета называются субтрактивными ("вычитательными"), поскольку они остаются после вычитания основных аддитивных: например, краска голубого цвета поглощает красный и отражает синий и зеленый цвета.
Понятно, что в таком случае и основных субтрактивных цветов будет три, тем более, что они уже упоминались: голубой, пурпурный, желтый.
Перечисленные цвета составляют так называемую полиграфическую триаду (process colors). При печати эти цвета поглощают красную, зеленую и синюю составляющие белого света таким образом, что большая часть видимого цветового спектра может быть репродуцирована на бумаге. Каждому пикселу в CMYK-изображении присваиваются значения, определяющие процентное содержание триадных красок.
При смешениях двух субтрактивных составляющих результирующий цвет затемняется, а при смешении всех трех должен получиться черный цвет. При полном отсутствии краски остается белый цвет (белая бумага). Полное взаимодействие основных цветов модели CMYK представлено в табл. 17.1.
Таблица 4.1. Взаимодействие основных цветов модели CMYK
						
		Сочетание пигментов	Поглощаемые цвета	Отражаемые цвета	Итоговый цвет	
	Одинарные краски	Голубой	Красный	Зеленый и синий	Голубой	
		Пурпурный	Зеленый	Красный и синий	Пурпурный	
		Желтый	Синий	Красный и зеленый	Желтый	
	Бинарные сочетания	Голубой и пурпурный	Красный и зеленый	Синий	Синий	
	красок	Голубой и желтый	Красный и синий	Зеленый	Зеленый	
		Желтый и пурпурный	Зеленый и синий	Красный	Красный	
	Триадное сочетание красок	Голубой, пурпурный и желтый	Красный, зеленый и синий	Нет	(Черный)	
	Отсутствие краски	(белая бумага)	Нет	Красный, зеленый и синий	Белый	
						

В итоге получается, что нулевые значения составляющих дают белый цвет, максимальные значения должны давать черный, их равные значения — оттенки серого, кроме того, имеются чистые субтрактивные цвета и их двоиные сочетания. Это означает, что модель, в которой они описываются, похожа на модель RGB.
Но проблема заключается в том, что данная модель описывает реальные полиграфические краски (впечатление множества цветов обеспечивается варьированием размеров точек, условно говоря, трех цветов, это примерно соответствует варьированию интенсивности свечения люминофоров на экране монитора), которые — увы! — далеко не так идеальны, как цветной луч света. Они имеют примеси, поэтому не могут полностью перекрыть весь цветовой диапазон (поскольку, с одной стороны, неполностью поглощают свою зону спектра, а с другой, частично захватывают излучение соседних зон спектра), а это приводит, в частности, к тому, что смешение трех основных красок, которое должно давать (согласно теоретической модели) черный цвет, дает какой-то неопределенный ("грязный") темный цвет, но это скорее темно-коричневый, чем истинно черный цвет.
Другим несоответствием реальных процессов и теоретической цветовой модели является утверждение, что равные значения цветовых компонентов дают нейтральный серый. На самом деле в полиграфии существует проблема, именуемая "баланс по серому" (невозможно создать нейтральный серый, используя равные площади голубой, пурпурной и желтой растровой точки). Суть проблемы баланса сводится к тому, чтобы добиться такого соотношения площадей растровых точек цветных красок, которое бы вызывало визуальное восприятие нейтрального цвета.
Для компенсации этих и других недостатков в число основных полиграфических красок была внесена черная краска (она позволяет получить чистый насыщенный черный цвет и нейтральные тона при использовании технологий UCR и GCR). Именно эта краска добавила последнюю букву в название модели CMYK, хотя и не совсем обычно. С — это Cyan (голубой), М — это Magenta (пурпурный), Y - Yellow (желтый), а (внимание!) К — это ЫасК (Черный), т. е. от слова взята не первая, а последняя буква. Хотя более вероятным представляется другая версия: буква К — это сокращение от слова Key ("ключевой", "основной", "контурный"). Черный цвет играет решающую роль в полиграфическом производстве (от него в значительной степени зависит общая резкость оттисков).
Замечание
Пурпурный цвет, по утверждениям физиков, отсутствует в солнечном свете, а предстает в природе только в форме пигментов, например красок, которые поглощают зеленые оттенки, но отражают синие и красные.
Модели RGB и CMYK, хотя и связаны друг с другом, однако их взаимные переходы друг в друга (конвертирование) никогда не происходят без потерь. Тем более что цветопередача полиграфического воспроизведения изображений еще более зависима от всевозможных условий (аппаратных и технологических). И речь идет лишь о том, чтобы уменьшить потери до приемлемого уровня. Это вызывает необходимость очень сложных калибровок всех аппаратных частей, составляющих работу с цветом, — сканера (он осуществляет ввод изображения), монитора (по нему судят о цвете и корректируют его), выводного устройства (оно создает оригиналы для печати), печатного станка (выполняющего конечную стадию).
Цветовая модель HSB
Если две вышеописанные модели представить в виде единой модели, получится усеченный вариант цветового круга, в котором цвета располагаются в известном еще со школы порядке: красный (R), желтый (Y), зеленый (G), голубой (С), синий (В).
На цветовом круге основные цвета моделей RGB и CMY находятся в такой зависимости: каждый цвет расположен напротив дополняющего его (комплементарного) цвета, при этом он находится между цветами, с помощью которых получен. Например, сложение зеленого и красного цветов дает желтый. Чтобы усилить какой-либо цвет, нужно ослабить дополняющий его цвет (расположенный напротив него на цветовом круге). Например, чтобы изменить общее цветовое решение в сторону голубых тонов, следует снизить в нем содержание красного цвета. На этом основаны принципы цветовой коррекции изображений.
По краю этого цветового круга располагаются так называемые спектральные цвета или цветовые тона (Hue), которые определяются длиной световой волны, отраженной от непрозрачного объекта или прошедшей через прозрачный объект. Цветовой тон характеризуется положением на цветовом круге и определяется величиной угла в диапазоне от 0 до 360 градусов. Эти цвета обладают максимальной насыщенностью, т. е. синий цвет синее быть уже не может. Таким образом, в данной цветовой модели выделяется 359 цветовых оттенков.
Насыщенность (Saturation) — это параметр цвета, определяющий его чистоту. Отсутствие (серых) примесей (чистота кривой) соответствует данному параметру. Уменьшение насыщенности цвета означает его разбеливание. Цвет с уменьшением насыщенности становится пастельным, блеклым, размытым. На модели все одинаково насыщенные цвета располагаются на концентрических окружностях, т. е. можно говорить об одинаковой насыщенности, например, зеленого и пурпурного цветов, и чем ближе к центру круга, тем все более разбеленные цвета получаются. В самом центре любой цвет максимально разбеливается, проще говоря, становится белым цветом.
Работу с насыщенностью можно характеризовать как добавление в спектральный цвет определенного процента белой краски. Чем больше в цвете содержание белого, тем ниже значение насыщенности, тем более блеклым он становится. Спектральные цвета с максимальной насыщенностью встречаются в естественной среде крайне редко, этим грешат скорее художники, несущие в среду обитания визуальную агрессию.
Яркость (Brightness) — это параметр цвета, определяющий освещенность или затемненность цвета. Амплитуда (высота) световой волны соответствует этому параметру. Уменьшение яркости цвета означает его зачернение. Работу с яркостью можно характеризовать как добавление в спектральный цвет определенного процента черной краски. Чем больше в цвете содержание черного, тем ниже яркость, тем более темным становится цвет.
В общем случае, любой цвет в модели HSB получается из спектрального цвета добавлением определенного процента белой и черной красок, т. е. фактически серой краски. Такая модель имеет название HSB — по первым буквам приведенных выше английских слов.
В этой модели — три координатных оси: первая ось — это линия окружности основания конуса, вторая ось — диаметр, соединяющий любую точку на окружности с центром, третья ось — высота конуса.
Данная модель уже гораздо ближе к традиционному пониманию работы с цветом. Можно определять сначала цветовой тон, а затем насыщенность и яркость.
Пример
Эта цветовая модель позволяет работать в традиционном режиме, т. е. оперировать цветом не с точки зрения технических устройств, а с точки зрения обычной художественной практики. Когда требуется подобрать определенный оттенок красного цвета, художник не выделяет составляющие его красный, зеленый и синий, а берет тюбик с красной краской, выдавливает некоторое количество краски, а потом в нее добавляет необходимое количество белил и других красок. При этом цвет остается в пределах диапазона красных цветов.
Первую подобную модель предложил художник Мансель (Munsell A. H.), впоследствии на ее основе было разработано несколько подобных моделей.
Модель HSB неплохо согласуется с восприятием цвета человеком: цветовой тон является эквивалентом длины волны света, насыщенность — эквивалент интенсивности волны, а яркость — количества света. Неоспоримым достоинством этой модели является то, что перечисленные параметры не зависят друг от друга (в противоположность моделям RGB и CMYK, у которых любое изменение какого-либо параметра влечет за собой изменение тона, насыщенности и яркости цвета).
Легко рассчитать количество цветов, описываемых этой моделью.
В окружности 359 секторов по количеству спектральных цветов, каждый сектор содержит по 100 уровней насыщенности и по 100 уровней яркости. Если учесть, что площадь сечения конуса равняется половине произведения радиуса на высоту, деленного пополам, то получается 5000 цветов. Затем это число необходимо умножить на 359 — получим 1 795 000 цветов.
Однако следует иметь в виду, что эта модель является тем не менее достаточно абстрактной, поскольку не существует технических средств для измерения параметров цветового тона и насыщенности непосредственно, в программных приложениях они получаются путем математических расчетов.
Следовательно, недостатком этой модели является необходимость преобразовывать ее в модель RGB для отображения на экране монитора или в модель CMYK для получения полиграфического оттиска.
И наконец, последнее замечание. Особенностью этой цветовой модели — она еще называется пользовательской — является то, что она не образует цветовых каналов в документе. Нельзя сохранить документ в этой цветовой модели.
Цветовая модель LAB
Цветовая модель L*a*b была разработана Международной комиссией по освещению (Commission Internationale de 1'Eclairage — CIE) с целью преодоления существенных недостатков вышеизложенных моделей, в частности она призвана стать аппаратно независимой моделью и определять цвета без оглядки на особенности устройства (сканера, монитора, принтера, печатного станка и т. д.).
Пример-метафора
Аппаратную зависимость других цветовых моделей можно сравнить, скажем, с зависимостью блюда от конкретного повара, хотя все используют один и тот же репепт приготовления. Невозможно утверждать, что если все станут придерживаться рецепта, то и вкус блюда окажется идентичным.
Цветовое пространство модели может быть условно представлено в виде схемы. Все цвета, расположенные внутри и на границе "подковы", являются физически реализуемыми.
Схему можно использовать для определения цветового охвата любого устройства, если известны параметры основных цветов, которые используются для синтеза результирующего цвета. Для этого достаточно на схеме определить точки основных цветов и соединить их прямыми линиями.
Что касается цветовых параметров, то в этой модели любой цвет определяется светлотой (L) и двумя хроматическими компонентами: параметром а, который изменяется в диапазоне от пурпурного (magenta) до зеленого (green), и параметром b, изменяющимся в диапазоне от желтого (yellow) до синего (blue).
В этой модели также трудно ориентироваться, как и в моделях RGB или CMYK, но об этой модели нужно иметь представление, поскольку многие программы используют ее в качестве модели-посредника при любом конвертировании из одной цветовой модели в другую. Кроме того, ее также можно использовать в следующих случаях: при печати на принтерах с PostScript Level 2 и Level 3, при работе с форматом PhotoCD, при конвертировании цветного изображения в серую шкалу.
Таким образом, цветовая модель сочетает абстрактный характер модели HSB и реализуемость моделей RGB и CMYK.
В системе RGB используются источники составляющих, которые технически реализуются (например, цветные люминофоры и цветные фильтры для юпитеров), а в модели Lab — условные источники, которых не существует в природе, но такое научное допущение позволяет описывать все видимые человеком цвета, которые по-прежнему являются суммой положительных количеств красного, зеленого и синего компонентов. В результате математических ухищрений один из искусственных источников может быть исключен, а оставшиеся обозначаются символами х и у. Оси х и у представляют собой единичные векторы, разбиваемые на 10 (или 100) частей.
Цвета, которые находятся на линии, ограничивающей "подковку", обозначают спектральные цвета, получаемые в этой модели смешением составляющих х и у. Например, спектральный красный — это сочетание 0,7 по оси х и 0,25 по оси у.
Цвета, которые располагаются внутри "подковки", представляют собой физически реализуемые цвета, следовательно, каждый из них можно также применять для аддитивного синтеза других цветов. Кроме того, это позволяет графически обозначить цветовые охваты

